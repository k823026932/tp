(function(){$(function(){return $.require("ready",function(){var t;return t=$$("#block-first"),t.setup({ready:function(t){return $$("#btn-bug-feedback").click(function(){var n;return n=$(this),n.hasClass("active")?(n.removeClass("active warning"),void(t.data().isBug=0)):n.ensure({curtain:!1,text:"您是否确定您反馈的问题是一个Bug？<br>请勿将您无法确定的问题标记为Bug，这不仅会增加反馈信息的处理难度，也有可能会导致您的账号受到处罚。",callback:function(){return n.addClass("active warning"),t.data().isBug=1}})})},submit:function(n){return $.post("/fb/feedback/submit/",{title:n.data().title,content:n.data().content,userAgent:navigator.userAgent,isBug:n.data().isBug?1:0,fromUrl:system.hash.from||null}).fail(function(){return $.info("error","反馈提交失败。请于稍后重试。")}).done(function(n){switch(n.status){case 200:return $.info("success","反馈提交成功。"),t.find(".before").addClass("hidden").siblings(".after").removeClass("hidden");default:return $.info("warning",n.msg)}})}}),t.find("span.hint-hover").each(function(){var t;return t=$(this),t.hoverInfo({text:t.attr("title").replace(/\n/g,"<br>"),fadeout:0}).removeAttr("title")})})})}).call(this);